<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="statistic">
	<select id="getEachAv" parameterType="java.util.Map" resultType="double">
		select avg(cal_eval)
		from calendar
		where to_number(cal_date)>= #{monthEarly} and to_number(cal_date)&lt;=#{monthEnd}
		group by mem_no
	</select>
	<select id="getMyAverage" parameterType="java.util.Map" resultType="double">
		select avg(cal_eval)
		from calendar
		where to_number(cal_date)>= #{monthEarly} and to_number(cal_date)&lt;=#{monthEnd} and mem_no=#{mem_no}
	</select>
	<select id="getMemNum" parameterType="java.util.Map" resultType="int">
		select count(distinct mem_no)
		from calendar
		where to_number(cal_date)>= #{monthEarly} and to_number(cal_date)&lt;=#{monthEnd}
	</select>
	<select id="entireMemNum" parameterType="int" resultType="int">
		select count(distinct mem_no)
		from calendar
		where to_number(cal_date)=#{yesterday}
	</select>
	<select id="getGoalNum" parameterType="int" resultType="int">
		select count(distinct c.mem_no)
		from calendar c, member m
		where to_number(cal_date)=#{yesterday} and m.mem_w = m.GOAL_W and c.mem_no= m.mem_no
	</select>
</mapper>